<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Letters Game</title>
</head>
<body>
<h1>Letters Game</h1>

<!-- Display the image -->
<img th:src="@{'/getImage/' + ${currentQuestion.id}}" alt="Question Image" width="200" height="200" />

<!-- Button to play audio for the question -->
<button onclick="playAudio([[${currentQuestion.id}]])">HLUSTA</button>

<!-- Options for the game -->
<div>
    <button onclick="handleOptionClick(1)">Option 1</button>
    <button onclick="handleOptionClick(2)">Option 2 (Correct)</button>
    <button onclick="handleOptionClick(3)">Option 3</button>
</div>

<script>
        function playAudio(questionId) {
            fetch('/playQuestion/' + questionId)
                .then(response => {
                    if (response.ok) {
                        return response.blob();
                    }
                    throw new Error('Audio fetch failed');
                })
                .then(audioBlob => {
                    const audioUrl = URL.createObjectURL(audioBlob);
                    const audio = new Audio(audioUrl);
                    audio.play();
                })
                .catch(error => {
                    console.error('Error playing audio:', error);
                    alert('Error playing audio');
                });
        }

        function handleOptionClick(selectedOption) {
            // Implement game logic here
            if (selectedOption === 2) { // Example correct option check
                alert('HÃºrra! Vel gert!');
                // Logic to generate a new question
            } else {
                alert('Reyndu aftur!');
            }
        }
    </script>
</body>
</html>
